{
    "name": "ROS2 Jazzy Niryo Workshop",
    
    // Use pre-built image from registry (recommended for workshop participants)
    "image": "ghcr.io/niryorobotics/roscon-2025-workshop:latest",
    
    // Alternative: Build locally from Dockerfile (uncomment to use local build)
    // "build": {
    //     "dockerfile": "Dockerfile",
    //     "context": "..",
    //     "args": {
    //         "USER_UID": "1000",
    //         "USER_GID": "1000",
    //         "USERNAME": "niryo",
    //         "WORKSPACE_NAME": "niryo_workshop"
    //     }
    // },
    
    "runArgs": [
        "--net=host",
        "-e", "DISPLAY=${localEnv:DISPLAY:-:0}",
        "-v", "/tmp/.X11-unix:/tmp/.X11-unix:rw",
        "--device=/dev/dri",
        "--privileged"
    ],
    
    "mounts": [
        "source=${localWorkspaceFolder},target=/home/niryo/niryo_workshop/src/roscon-2025,type=bind,consistency=cached"
    ],
    
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-iot.vscode-ros",
                "ms-python.vscode-pylance",
                "ms-python.black-formatter",
                "ms-python.isort",
                "ms-vscode.cpptools",
                "ms-vscode.cmake-tools",
                "twxs.cmake"
            ],
            "settings": {
                "python.defaultInterpreterPath": "/home/niryo/niryo_workshop/venv/bin/python",
                "python.terminal.activateEnvironment": true,
                "terminal.integrated.defaultProfile.linux": "bash",
                "terminal.integrated.cwd": "/home/niryo/niryo_workshop"
            }
        }
    },
    
    "remoteUser": "niryo",
    "workspaceFolder": "/home/niryo/niryo_workshop",
    "postCreateCommand": "echo 'Welcome to the Niryo ROS2 Workshop! Your environment is ready.' && cd /home/niryo/niryo_workshop && (source install/setup.bash 2>/dev/null || echo 'Run build-workspace to build the ROS packages')",
    
    "forwardPorts": [9090],
    "portsAttributes": {
        "9090": {
            "label": "ROS Bridge",
            "onAutoForward": "notify"
        }
    }
}
  